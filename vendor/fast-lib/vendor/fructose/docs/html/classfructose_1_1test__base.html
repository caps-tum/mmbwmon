<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>FRUCTOSE: fructose::test_base&lt; test_container &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="namespacefructose.html">fructose</a>      </li>
      <li><a class="el" href="classfructose_1_1test__base.html">fructose::test_base&lt; test_container &gt;</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<h1>fructose::test_base&lt; test_container &gt; Class Template Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="fructose::test_base" --><!-- doxytag: inherits="fructose::test_root" -->
<p><code>#include &lt;<a class="el" href="test__base_8h_source.html">test_base.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for fructose::test_base&lt; test_container &gt;:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classfructose_1_1test__base.png" usemap="#fructose::test_base&lt; test_container &gt;_map" alt=""/>
  <map id="fructose::test_base&lt; test_container &gt;_map" name="fructose::test_base&lt; test_container &gt;_map">
<area href="classfructose_1_1test__root.html" alt="fructose::test_root" shape="rect" coords="0,0,220,24"/>
</map>
</div>

<p><a href="classfructose_1_1test__base-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(test_container::*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfructose_1_1test__base.html#a696e7bf639f2a82053e8529eab26ab1e">test_case</a> )(const std::string &amp;)</td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfructose_1_1test__base.html#a30560442a7c4c8c495e2bd7cff352cdd">add_test</a> (const std::string &amp;name, <a class="el" href="classfructose_1_1test__base.html#a696e7bf639f2a82053e8529eab26ab1e">test_case</a> the_test)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfructose_1_1test__base.html#abd2e9bcf3098f22ce4ff6bb44218ddfd">run</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfructose_1_1test__base.html#a1e71f643ce9403eaef70befedc068daa">run</a> (int argc, char *argv[])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfructose_1_1test__base.html#a7f62476b5b76f573ad6eab2adcbab476">run</a> (const <a class="el" href="classfructose_1_1test__root.html#ab2c953a7a015f7866df59cc62e1aca89">suite</a> &amp;<a class="el" href="classfructose_1_1test__root.html#ab2c953a7a015f7866df59cc62e1aca89">suite</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfructose_1_1test__root.html#ab2c953a7a015f7866df59cc62e1aca89">suite</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfructose_1_1test__base.html#a7b41fc2ae3f64bcc5139cb74830aeffa">get_suite</a> (int argc, char *argv[])</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;typename test_container&gt;<br/>
 class fructose::test_base&lt; test_container &gt;</h3>

<p>Base class for test container classes</p>
<p>The test container class, i.e., the one which contains the test cases as members, must derive from <a class="el" href="classfructose_1_1test__base.html">test_base</a>.</p>
<p>Synopsis:</p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">     #include &quot;fructose/fructose.h&quot;</span>
 
     [...]
 
     <span class="keyword">class </span>my_test : <span class="keyword">public</span> test_base&lt;my_test&gt;
     {
     <span class="keyword">public</span>:
         my_test(<span class="keywordtype">int</span> val1, <span class="keywordtype">int</span> val2);
         <span class="keywordtype">void</span> test_equality(<span class="keyword">const</span> std::string&amp; test_name);
            <span class="keywordtype">void</span> test_foobar(<span class="keyword">const</span> std::string&amp; test_name);
         [...]
     };
 
     [...]
 
     <span class="keywordtype">void</span> my_test::test_equality(<span class="keyword">const</span> std::string&amp; the_name)
     {
         fructose_assert(my_test(1,2) == my_test(1,2));
     }
 
     [...]
 
     <span class="keywordtype">void</span> my_test::test_foobar(<span class="keyword">const</span> std::string&amp; test_name)
     {
         fructose_assert_exception(my_test(1,4).foobar(), MathException);
     }
 
     <span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])
     {
         my_test tests;
 
         tests.add_test(<span class="stringliteral">&quot;testEquality&quot;</span>, &amp;my_test::test_equality);
         tests.add_test(<span class="stringliteral">&quot;testAddition&quot;</span>, &amp;my_test::test_foobar);
     
         [...]
 
         <span class="keywordflow">return</span> tests.run(argc, argv); 
     }
</pre></div><p>There should be a test driver for each library module (*.cpp file with associated header), structured like the example above. Test cases are represented as member functions of an ad-hoc class ("test container class") which must derive from the template <a class="el" href="classfructose_1_1test__base.html">test_base</a> with itself as the template argument. (This is the Curiously Recurring Template Pattern CRTP.)</p>
<p>In writing the test code, the test assert macros defined below come in handy.</p>
<ul>
<li>fructose_assert(condition)</li>
<li>fructose_loop1_assert(line, 1stLoopCounter, condition)</li>
<li>fructose_loop2_assert(line, 1stLoopCounter, 2ndLoopCounter, condition)</li>
</ul>
<p>Test drivers accept a set of standard command line arguments which are displayed if the -h option is set:</p>
<div class="fragment"><pre class="fragment"> USAGE: 

    ./example [-h] [-r] [-a] [-v] [--] &lt;testNameString&gt; ...

 Where: 

 -h,  --help           produces <span class="keyword">this</span> help

 -r,  --reverse        reverses the sense of test assertions.

  -a,  --assert_fatal   is used to make the first test failure fatal.

  -v,  --<a class="code" href="classfructose_1_1test__root.html#ad599f1c6a610e811991b8bd40d9a32bf">verbose</a>        turns on extra trace <span class="keywordflow">for</span> those tests that have made use of it.

  --,  --ignore_rest    Ignores the rest of the labeled arguments following <span class="keyword">this</span> flag.


   &lt;testNameString&gt;  (accepted multiple times)
    test names

   Any number of test names may be supplied on the command line. If the
   name <span class="stringliteral">&#39;all&#39;</span> is included then all tests will be <a class="code" href="classfructose_1_1test__base.html#abd2e9bcf3098f22ce4ff6bb44218ddfd">run</a>.

  
  Supported test names are:
      test_equality
      test_foobar
</pre></div><p>Notice the list of configured test cases displayed after the command line options. Test cases can be named explicitly when running the driver, which restricts execution to the named test cases.</p>
<div class="fragment"><pre class="fragment">     $ testdriver -v test_foobar
     running test_foobar
</pre></div><p>This is useful when trying to focus on one test case. </p>
<hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="a696e7bf639f2a82053e8529eab26ab1e"></a><!-- doxytag: member="fructose::test_base::test_case" ref="a696e7bf639f2a82053e8529eab26ab1e" args=")(const std::string &amp;)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename test_container &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef void(test_container::* <a class="el" href="classfructose_1_1test__base.html">fructose::test_base</a>&lt; test_container &gt;::<a class="el" href="classfructose_1_1test__base.html#a696e7bf639f2a82053e8529eab26ab1e">test_case</a>)(const std::string &amp;)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Type of test case functions</p>
<p>Test cases are implemented as member functions of the test container class, which must be derived from this template (CRTP). These methods return void and accept one parameter: the name of the test case. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a30560442a7c4c8c495e2bd7cff352cdd"></a><!-- doxytag: member="fructose::test_base::add_test" ref="a30560442a7c4c8c495e2bd7cff352cdd" args="(const std::string &amp;name, test_case the_test)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename test_container &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfructose_1_1test__base.html">fructose::test_base</a>&lt; test_container &gt;::add_test </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfructose_1_1test__base.html#a696e7bf639f2a82053e8529eab26ab1e">test_case</a>&nbsp;</td>
          <td class="paramname"> <em>the_test</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Register a test case</p>
<p>Register a member function implementing a test case against the name of the test case</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>- The name of the test case </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>the_test</em>&nbsp;</td><td>- The member function implementing the test case </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7b41fc2ae3f64bcc5139cb74830aeffa"></a><!-- doxytag: member="fructose::test_base::get_suite" ref="a7b41fc2ae3f64bcc5139cb74830aeffa" args="(int argc, char *argv[])" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename test_container &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfructose_1_1test__root.html#ab2c953a7a015f7866df59cc62e1aca89">test_root::suite</a> <a class="el" href="classfructose_1_1test__base.html">fructose::test_base</a>&lt; test_container &gt;::get_suite </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>argv</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return a list of test names from the command line.</p>
<p>This function returns a suite containing all the test cases named on the command line. If none are named, or if the keyword "all" is passed, all the configured test cases are included.</p>
<p>Note: This routine is provided for compatibility with older versions of fructose. New programs should use the function run(argc, argv).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>argc</em>&nbsp;</td><td>- The argument count passed to main </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>argv</em>&nbsp;</td><td>- The argument vector passed to main</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The configured test suite </dd></dl>

<p>References <a class="el" href="classfructose_1_1test__root.html#abc4c18fe1ea77af92e6f5bfea0eb7c09">fructose::test_root::do_get_suite()</a>.</p>

<p>Referenced by <a class="el" href="classfructose_1_1test__base.html#a1e71f643ce9403eaef70befedc068daa">fructose::test_base&lt; test_container &gt;::run()</a>.</p>

</div>
</div>
<a class="anchor" id="a7f62476b5b76f573ad6eab2adcbab476"></a><!-- doxytag: member="fructose::test_base::run" ref="a7f62476b5b76f573ad6eab2adcbab476" args="(const suite &amp;suite)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename test_container &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classfructose_1_1test__base.html">fructose::test_base</a>&lt; test_container &gt;::run </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfructose_1_1test__root.html#ab2c953a7a015f7866df59cc62e1aca89">suite</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>suite</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Run tests configured in test suite</p>
<p>This function runs the tests named in the test suite in the sequence by the suite. If the suite contains a name which is not registered, a warning message is issued.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>suite</em>&nbsp;</td><td>- The test suite</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- An integer suitable as main exit status: EXIT_SUCCESS if the the tests were successful, EXIT_FAILURE otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a1e71f643ce9403eaef70befedc068daa"></a><!-- doxytag: member="fructose::test_base::run" ref="a1e71f643ce9403eaef70befedc068daa" args="(int argc, char *argv[])" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename test_container &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classfructose_1_1test__base.html">fructose::test_base</a>&lt; test_container &gt;::run </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>argv</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Run the test specified on the command line (runs all tests if none specified). Flags are set for various command line options such as the verbose flag and first assertion is fatal. </p>

<p>References <a class="el" href="classfructose_1_1test__base.html#a7b41fc2ae3f64bcc5139cb74830aeffa">fructose::test_base&lt; test_container &gt;::get_suite()</a>, and <a class="el" href="classfructose_1_1test__base.html#abd2e9bcf3098f22ce4ff6bb44218ddfd">fructose::test_base&lt; test_container &gt;::run()</a>.</p>

</div>
</div>
<a class="anchor" id="abd2e9bcf3098f22ce4ff6bb44218ddfd"></a><!-- doxytag: member="fructose::test_base::run" ref="abd2e9bcf3098f22ce4ff6bb44218ddfd" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename test_container &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classfructose_1_1test__base.html">fructose::test_base</a>&lt; test_container &gt;::run </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Run statically configured tests</p>
<p>This function runs all the registered tests in the sequence in which they were registered.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>- An integer suitable as main exit status: EXIT_SUCCESS if the the tests were successful, EXIT_FAILURE otherwise. </dd></dl>

<p>Referenced by <a class="el" href="classfructose_1_1test__base.html#a1e71f643ce9403eaef70befedc068daa">fructose::test_base&lt; test_container &gt;::run()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/fructose/<a class="el" href="test__base_8h_source.html">test_base.h</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Mon May 28 2012 18:30:11 for FRUCTOSE by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
